<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>NLO Admin</title>
    <link rel="icon" href="/admin/favicon.ico">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"
    >

    <link rel="stylesheet" href="/admin/static/css/2.b74256fb.chunk.css">
    <link rel="stylesheet" href="/admin/static/css/main.913a54c0.chunk.css">
    <link rel="stylesheet" href="/admin/nlo-admin.css?v=20260217-gh-palette-1">
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>

    <script>
      (() => {
        if (!window.fetch) return;

        const originalFetch = window.fetch.bind(window);

        function normalizeApiUrl(input) {
          try {
            const url = new URL(typeof input === "string" ? input : input.url, window.location.origin);
            if (url.pathname.startsWith("/admin/_api/")) {
              url.pathname = url.pathname.replace("/admin/_api/", "/_api/");
              return url.toString();
            }
            return typeof input === "string" ? input : input.url;
          } catch (_e) {
            return input;
          }
        }

        window.fetch = (input, init) => {
          const normalized = normalizeApiUrl(input);
          return originalFetch(normalized, init).then((response) => {
            const responseUrl = new URL(response.url, window.location.origin);
            const isConfigApi = responseUrl.pathname === "/_api/configuration";
            const contentType = (response.headers.get("content-type") || "").toLowerCase();
            const isJson = contentType.includes("application/json");

            if (!isConfigApi || isJson) {
              return response;
            }

            const fallback = new URL("/_api/configuration", window.location.origin);
            fallback.searchParams.set("_", String(Date.now()));
            return originalFetch(fallback.toString(), {
              credentials: "same-origin",
              cache: "no-store"
            });
          });
        };
      })();
    </script>

    <script src="/admin/static/js/runtime-main.95f94e60.js"></script>
    <script src="/admin/static/js/2.08ea13e0.chunk.js"></script>
    <script src="/admin/static/js/main.a0831f44.chunk.js"></script>
    <script defer src="/admin/nlo-admin.js?v=20260217-gh-palette-1"></script>
  </body>
</html>
